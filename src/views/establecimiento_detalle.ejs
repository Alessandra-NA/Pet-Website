<html>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<div class="container mb-3">
    <div class="card">
        <div class="row">
            <div class="col-4">
                <% if (establecimiento.photo1){ %>
                    <img src="data:image/png;base64,<%=establecimiento.photo1%>" class="img-fluid" alt="...">
                    <% }%>
            </div>
            <div class="col-2">
                <div class="row">
                    <% if (establecimiento.photo2){ %>
                        <img src="data:image/png;base64,<%=establecimiento.photo2%>" class="img-fluid" alt="...">
                        <% }%>
                </div>
                <div class="row">
                    <% if (establecimiento.photo3){ %>
                        <img src="data:image/png;base64,<%=establecimiento.photo3%>" class="img-fluid" alt="...">
                        <% }%>
                </div>
                <div class="row">
                    <% if (establecimiento.photo4){ %>
                        <img src="data:image/png;base64,<%=establecimiento.photo4%>" class="img-fluid" alt="...">
                        <% }%>
                </div>
            </div>
            <div class="col-6">
                <div class="row" style="text-align: center; margin: 2%;">
                    <p class="h1">
                        <%=establecimiento.name%>
                    </p>
                </div>
                <div class="card" style="margin-bottom: 2%;">
                    <h5 class="card-title">Distrito</h5>
                    <p class="card-text" style="text-align: center;">
                        <%=establecimiento.location.district%>
                    </p>
                </div>
                <div class="card" style="margin-bottom: 2%;">
                    <h5 class="card-title">Dirección</h5>
                    <p class="card-text" style="text-align: center;">
                        <%=establecimiento.location.address%>
                    </p>
                </div>
                <div class="card" style="margin-bottom: 2%;">
                    <h5 class="card-title">Distrito</h5>
                    <p class="card-text" style="text-align: center;">
                        <%=establecimiento.location.district%>
                    </p>
                </div>
                <div class="card" style="margin-bottom: 2%;">
                    <h5 class="card-title">Link</h5>
                    <p class="card-text" style="text-align: center;">
                        <%=establecimiento.link%>
                    </p>
                </div>

                <div class="row" style="margin-bottom: 2%;">
                    <div class="col">
                        <div class="icon-type ">
                            <!-- Con la mascota -->
                            <% if (establecimiento.type=='Bares & Cafés' ){ %>
                                <img title="<%=establecimiento.type%>"
                                    src="https://www.srperro.com/media/categoria/33c96c76-0bcf-4ae2-89db-9963cc847bdb.png"
                                    class="img-fluid">
                                <% } else if (establecimiento.type=='Restaurantes' ){ %>
                                    <img title="<%=establecimiento.type%>"
                                        src="https://www.srperro.com/media/categoria/46a58912-ccc9-4ae8-83a1-84d3628d472c.png"
                                        class="img-fluid">
                                    <% } else if (establecimiento.type=='Terrazas' ){ %>
                                        <img title="<%=establecimiento.type%>"
                                            src="https://cdn-icons-png.flaticon.com/512/174/174446.png"
                                            class="img-fluid">
                                        <% } else if (establecimiento.type=='Hoteles & Alojamientos' ){ %>
                                            <img title="<%=establecimiento.type%>"
                                                src="https://www.srperro.com/media/categoria/6faf13fc-d4c0-4c41-9818-d906fff2d9fa.png"
                                                class="img-fluid">
                                            <% } else if (establecimiento.type=='Playas' ){ %>
                                                <img title="<%=establecimiento.type%>"
                                                    src="https://www.srperro.com/media/categoria/52c40115-b990-4e4b-a821-a294f537b683.png"
                                                    class="img-fluid">
                                                <% } else if (establecimiento.type=='Tiendas' ){ %>
                                                    <img title="<%=establecimiento.type%>"
                                                        src="https://www.srperro.com/media/categoria/716975e5-67e5-4cd0-8865-2e083e0ddf70.png"
                                                        class="img-fluid">
                                                    <% } else if (establecimiento.type=='Parques' ){ %>
                                                        <img title="<%=establecimiento.type%>"
                                                            src="https://www.srperro.com/media/categoria/036729f4-0085-4e9c-acee-1d4542ca0c4c.png"
                                                            class="img-fluid">
                                                        <% } else if (establecimiento.type=='Centros de belleza' ){ %>
                                                            <img title="<%=establecimiento.type%>"
                                                                src="https://www.srperro.com/media/categoria/2ceedd89-faa0-4731-ad07-ae4d0da88a55.png"
                                                                class="img-fluid">
                                                            <% } else if (establecimiento.type=='Clínicas' ){ %>
                                                                <img title="<%=establecimiento.type%>"
                                                                    src="https://img2.freepng.es/20180420/vce/kisspng-hospital-computer-icons-medicine-clinic-clip-art-clinic-5adaa5a660c301.3626810315242786943964.jpg"
                                                                    class="img-fluid">
                                                                <% } else if (establecimiento.type=='Transportes' ){ %>
                                                                    <img title="<%=establecimiento.type%>"
                                                                        src="https://www.srperro.com/media/categoria/22e0a85a-9d3e-48e1-a338-4d23d9d859ca.png"
                                                                        class="img-fluid">
                                                                    <!-- Para mascotas -->
                                                                    <% } else if (establecimiento.type=='Spa mascotas'
                                                                        ){ %>
                                                                        <img title="<%=establecimiento.type%>"
                                                                            src="https://cdn-icons-png.flaticon.com/512/1499/1499544.png"
                                                                            class="img-fluid">
                                                                        <% } else if
                                                                            (establecimiento.type=='Veterinarias' ){ %>
                                                                            <img title="<%=establecimiento.type%>"
                                                                                src="https://www.srperro.com/media/categoria/1e49faef-4aee-41fc-8634-e812b909a185.png"
                                                                                class="img-fluid">
                                                                            <% } else if
                                                                                (establecimiento.type=='Tiendas mascotas'
                                                                                ){ %>
                                                                                <img title="<%=establecimiento.type%>"
                                                                                    src="https://www.srperro.com/media/categoria/d5bc7c4e-58fc-44d4-89ff-b3146bca3de0.png"
                                                                                    class="img-fluid">
                                                                                <!-- Otros -->
                                                                                <% } else { %>
                                                                                    <img title="<%=establecimiento.type%>"
                                                                                        src="https://www.srperro.com/media/categoria/3d0dc4cd-9c7c-4f0e-87d2-f66161ccaa35.png"
                                                                                        class="img-fluid">
                                                                                    <% } %>
                        </div>
                    </div>
                    <div class="col-4">
                        <span class="align-middle">
                            <%=establecimiento.rating%>/5
                        </span>
                        <span class="material-icons align-middle"> pets </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="col d-grid gap-2 d-md-flex justify-content-end">
        <% if (globalType.length>0 && globalType != 'admin') { %>
            <button type="button" class="btn btn-primary" style="float: right;"
                onclick="location.href='./suggestion_form?id=<%=establecimiento.id%>'">Dar Sugerencia</button>
            <% } %>
                <button type="button" class="btn btn-danger" style="float: right;" onclick="location.href='#'">No
                    Petfriendly</button>
    </div>
    <div class="col">
        <p class="h2">Valoraciones:</p>
    </div>

    <div class="row justify-content-center">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4 mt-2 pb-3">
            <% comentarios.forEach(function(comentario){ %>
                <div class="col">
                    <div class="card mt-0 mb-2">
                        <div class="card-header">
                            <div class="row ">
                                <div class="col-2 d-flex align-items-center">
                                    <img src="data:image/png;base64,<%=comentario.user.photo?comentario.user.photo:''%>"
                                        alt="mdo" class="rounded-circle" width="32" height="32">
                                </div>
                                <div class="col-6 d-flex align-items-center">
                                    <div class="row">
                                        <span class="fw-bold">
                                            <%= comentario.user.first_name %>
                                        </span>
                                        <span class="fst-italic">
                                            <%= comentario.fecha %>
                                        </span>
                                    </div>
                                </div>

                                <div class="col-4 d-flex align-items-center justify-content-end">
                                    <span class="align-middle px-1 ">
                                        <%= comentario.score %>/5
                                    </span>
                                    <span class="material-icons align-middle"> pets </span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body card-border-comment">
                            <p class="text-justify fs-6 lh-base mb-0">
                                <%= comentario.desc %>
                            </p>
                        </div>
                    </div>
                </div>
                <% }) %>
        </div>

    </div>
</div>

<% if (globalType.length>0 && globalType != 'admin') { %>

    <div class="container">
        <form action="/establecimiento_detalle/nuevo_comentario?id=<%=establecimiento.id%>" method="post" class="row my-3">
            <div class="row">
                <p class="h2">¡Valora el negocio!</p>
            </div>
            <div class="row">
                <div class="col-7">  
                    <textarea class="form-control" name="desc" rows="6" maxlength="300" placeholder="Danos tu opinión"
                        style="resize: none;" required></textarea>
                </div>
                <div class="col-5 align-self-center">
                    <div class="row">
                        <p class="h4 text-center">¿Cuentas huellitas le pones?</p>
                    </div>
                    <div class="my-3">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="score" id="inlineRadio1" value=1 required>
                            <label class="form-check-label" for="inlineRadio1"><span class="align-middle px-1 ">1</span> <span class="material-icons align-middle"> pets </span> </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="score" id="inlineRadio2" value=2 required>
                            <label class="form-check-label" for="inlineRadio2"><span class="align-middle px-1 ">2</span> <span class="material-icons align-middle"> pets </span> </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="score" id="inlineRadio3" value=3 required>
                            <label class="form-check-label" for="inlineRadio3"><span class="align-middle px-1 ">3</span> <span class="material-icons align-middle"> pets </span> </label> 
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="score" id="inlineRadio4" value=4 required>
                            <label class="form-check-label" for="inlineRadio4"><span class="align-middle px-1 ">4</span> <span class="material-icons align-middle"> pets </span> </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="score" id="inlineRadio5" value=5 required>
                            <label class="form-check-label" for="inlineRadio5"><span class="align-middle px-1 ">5</span> <span class="material-icons align-middle"> pets </span> </label>
                        </div>
                    </div>
                    <div class="d-grid gap-2 col-4 mx-auto">
                        <button type="submit" class="btn btn-success">Valorar</button>
                    </div>
                    
                </div>
            </div>
        </form>
    </div>

<% } %>

</html>